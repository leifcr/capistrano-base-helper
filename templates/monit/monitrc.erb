set daemon <%= fetch(:monit_daemon_time) %>
  with start delay <%= fetch(:monit_start_delay) %>

set logfile syslog facility log_daemon

set statefile /var/lib/monit/state

set idfile /var/lib/monit/id

set eventqueue
    basedir /var/monit  # set the base directory where events will be stored
    slots 100           # optionaly limit the queue size

<%= fetch(:mail_alert_settings) %>

<% unless fetch(:monit_use_httpd) == "false" %>
set httpd port <%= fetch(:monit_httpd_port) %>
  <%= "use address #{fetch(:monit_httpd_bind_address, "localhost")}" unless fetch(:monit_httpd_bind_address).nil? %>
  <%= "allow #{fetch(:monit_httpd_allow_address)}" unless fetch(:monit_httpd_allow_address).nil? %>
  <%= "signature #{fetch(:monit_httpd_signature)}" %>
<% end %>

include /etc/monit/conf.d/*.conf
